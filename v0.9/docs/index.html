<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NAWA: NAWA</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NAWA<span id="projectnumber">&#160;0.9</span>
   </div>
   <div id="projectbrief">Web Application Framework for C++</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">NAWA </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md_README"></a></p>
<p >NAWA is a framework for web applications written in C++(17). It aims to make writing native web apps nearly as easy as writing them in specialized scripting languages (such as PHP). It provides the necessary features, such as sessions, request filters (for providing static elements such as images), and accessing and controlling all aspects of requests and responses (GET, POST, cookies, ...). Scroll on for a list of features.</p>
<p >NAWA communicates with the web server via FastCGI and currently uses the fastcgi++ lite library for efficient request handling.</p>
<p >It also comes with an integrated development web server (HTTP Request Handler) which can serve your application without depending on dedicated web server software (still somehow experimental and unfit for production use).</p>
<h1>News</h1>
<p ><b>New in v0.9</b></p>
<p >Sessions can now be used without cookies by manually passing the session ID when starting the session. A new overload of <code><a class="el" href="classnawa_1_1Session.html#a62dea076417704c14ed69f7744ad555c">nawa::Session::start()</a></code> has been added for this purpose.</p>
<p ><b>New in v0.8</b></p>
<p >The configuration can now be reloaded without restarting and apps (and request handling functions) can be hot-swapped. This allows you to update your app without interrupting request handling. Reloading can be done via systemd or by sending a SIGHUP signal to nawarun. If you are using NAWA as a library, take a look at <code><a class="el" href="classnawa_1_1RequestHandler.html#ac58db9a6ef43ff4c9e1121dbfe35dc30">nawa::RequestHandler::reconfigure()</a></code>.</p>
<p >Almost all data members of classes have become methods, therefore, it is necessary to update existing apps before upgrading. Please note that the project has been extensively restructured, therefore it might also be necessary to correct the includes of existing apps.</p>
<p >Additionally, this release adds support for macOS.</p>
<h1>Example</h1>
<p >The following example is the complete C++ source code of a NAWA app that answers every request with the "Hello World!". It's that simple.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="application_8h.html">nawa/application.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespacenawa.html">nawa</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="application_8h.html#ab862d0267d987adef3495419cd96a10b">init</a>(AppInit &amp;appInit) {</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="application_8h.html#ae1c02c6b05b0402ce3a00d450bd99252">handleRequest</a>(Connection &amp;connection) {</div>
<div class="line">    connection.responseStream() &lt;&lt; <span class="stringliteral">&quot;Hello World!&quot;</span>;</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aapplication_8h_html"><div class="ttname"><a href="application_8h.html">application.h</a></div></div>
<div class="ttc" id="aapplication_8h_html_ab862d0267d987adef3495419cd96a10b"><div class="ttname"><a href="application_8h.html#ab862d0267d987adef3495419cd96a10b">init</a></div><div class="ttdeci">int init(nawa::AppInit &amp;appInit)</div><div class="ttdef"><b>Definition:</b> <a href="contactform_8cpp_source.html#l00040">contactform.cpp:40</a></div></div>
<div class="ttc" id="aapplication_8h_html_ae1c02c6b05b0402ce3a00d450bd99252"><div class="ttname"><a href="application_8h.html#ae1c02c6b05b0402ce3a00d450bd99252">handleRequest</a></div><div class="ttdeci">int handleRequest(nawa::Connection &amp;connection)</div><div class="ttdef"><b>Definition:</b> <a href="contactform_8cpp_source.html#l00047">contactform.cpp:47</a></div></div>
<div class="ttc" id="anamespacenawa_html"><div class="ttname"><a href="namespacenawa.html">nawa</a></div><div class="ttdef"><b>Definition:</b> <a href="AppInit_8h_source.html#l00031">AppInit.h:31</a></div></div>
</div><!-- fragment --><p >You want to learn more? <a href="https://jatofg.github.io/nawa/v0.9/docs/gettingstarted.html">Read the full introduction tutorial.</a></p>
<p >If you don't like the IoC-style approach, you can also use NAWA as a library. <a href="https://jatofg.github.io/nawa/v0.9/docs/aslibrarymanual.html">An introduction can be found here.</a></p>
<h2>Warning!</h2>
<p >This project is still in an early state (version 0.9!). It might, of course, still contain bugs. Use it at your own risk.</p>
<p >If you use it, please report any bugs and wishes, so that this project might reach a higher version number at some point :)</p>
<p >Also, the ABI and API can still change at any time, making modifications to your apps (or, at least, recompilation) necessary. When such changes happen, the version number will be increased, and nawarun will refuse to load apps compiled against an older version.</p>
<h1>Main Features</h1>
<ul>
<li>Request Handling Backends (<a href="https://jatofg.github.io/nawa/v0.9/docs/gettingstarted.html">learn more</a>)<ul>
<li>FastCGI (serve requests through web server software)</li>
<li>HTTP (development web server, not production-ready yet)</li>
</ul>
</li>
<li>Access to request data (<a href="https://jatofg.github.io/nawa/v0.9/docs/environmentmanual.html">learn more</a>)<ul>
<li>GET, POST, COOKIE variables</li>
<li>Request headers</li>
<li>Request details (document root, request method, client IP, ...)</li>
<li>Environment information (server software, server IP, ...)</li>
</ul>
</li>
<li>Defining the response (<a href="https://jatofg.github.io/nawa/v0.9/docs/gettingstarted.html">learn more</a>)<ul>
<li>Set response body directly or using a stream</li>
<li>Set response headers</li>
<li>Set cookies</li>
<li>Default options for cookie security</li>
<li>Flush response prematurely</li>
<li>Respond with files from disk (incl. automatic setting of relevant response headers)</li>
<li>Automatically generate and send error pages</li>
</ul>
</li>
<li>Sessions (<a href="https://jatofg.github.io/nawa/v0.9/docs/sessionsmanual.html">learn more</a>)<ul>
<li>Full-featured session management</li>
<li>Session security options</li>
<li>Start sessions automatically (optional)</li>
<li>Set and get session variables of arbitrary types</li>
</ul>
</li>
<li>Request Filters (<a href="https://jatofg.github.io/nawa/v0.9/docs/filtersmanual.html">learn more</a>)<ul>
<li>Filter requests based on path, file extensions, or regular expressions</li>
<li>Serve filtered requests with files from disk (forward filter)</li>
<li>Block filtered requests with error pages</li>
<li>Require HTTP authentication for filtered requests</li>
</ul>
</li>
<li>Email (<a href="https://jatofg.github.io/nawa/v0.9/docs/emailmanual.html">learn more</a>)<ul>
<li>Create emails with headers</li>
<li>MIME email and attachment support</li>
<li>Automatic quoted-printable or base64 encoding (if desired)</li>
<li>Q-encoding for subjects</li>
<li>Replacement rules for personalizing mass emails</li>
<li>Sending emails via SMTP</li>
</ul>
</li>
<li>Cryptographic functions<ul>
<li>Password hashing (bcrypt, Argon2)</li>
<li>Classic hashing (SHA-1, SHA-2, MD5)</li>
</ul>
</li>
<li>Encoding and decoding functions<ul>
<li>HTML entities</li>
<li>URL encoding</li>
<li>Base64, quoted-printable, Q-encoding, encoded-word</li>
<li>Punycode for internationalized domain names</li>
</ul>
</li>
<li>Utility functions<ul>
<li>Regular expressions with callback</li>
<li>Convert strings to uppercase and lowercase</li>
<li>Generate error pages</li>
<li>Deduct content types</li>
<li>HTTP and SMTP time formatting</li>
<li>String and UNIX path splitting and merging</li>
<li>Line ending conversion</li>
<li>Load files into strings</li>
<li>Parse headers and cookies from raw HTTP</li>
</ul>
</li>
<li>Core features<ul>
<li>Multi-threaded request handling (configurable)</li>
<li>Hot-swapping of apps and request handling functions</li>
<li>Reload configuration without interrupting request handling</li>
</ul>
</li>
</ul>
<h1>Example</h1>
<p >A NAWA app consists of:</p>
<ul>
<li>A simple config file with properties concerning the behavior of the application, and</li>
<li>A shared object file containing the application itself.</li>
</ul>
<p >You can find an introduction containing a simple "Hello World!" NAWA app here: <a href="https://jatofg.github.io/nawa/v0.9/docs/gettingstarted.html">Getting started.</a></p>
<p >The path to the object file is included in the config file, and NAWA will take care of setting everything up and starting the app. You can run it like this:</p>
<p ><code>nawarun /path/to/config.ini</code> (or just <code>nawarun</code> if the file is named <code>config.ini</code> and located in the current working directory).</p>
<p >Run <code>nawarun -h</code> or <code>nawarun --help</code> for information on command line options (config overrides, starting without config file).</p>
<p >If systemd is present on your system, a systemd service file will also be installed on your system. You can start an app as a daemon using the path to its ini file (/path/to/config.ini):</p>
<p ><code>sudo systemctl start nawa@-path-to-config.ini</code></p>
<p >For automatically starting an app on boot, use <code>systemctl enable</code>.</p>
<h1>Building</h1>
<p >NAWA has been tested especially on Linux, but also runs fine on macOS (both as a library and using nawarun) *(1)*. It will probably also run on other BSD derivates, but this has not been tested.</p>
<p >Windows is not supported and never will be.</p>
<p ><b>Please note:</b> All commands in the following instructions should be run as an unprivileged user. Commands which must run as root are prepended with <code>sudo</code>.</p>
<p >*(1) <strike>Please note that due to a bug in Apple Clang, building will only succeed with gcc, which can be installed using homebrew. Other dependencies may also be installed using homebrew.</strike> Compiling with Apple Clang works fine on macOS 12, dependencies still have to be installed from homebrew.*</p>
<h2>Requirements</h2>
<p ><b>For running NAWA apps via nawarun / applications using libnawa:</b></p>
<ul>
<li>OpenSSL &gt;= 1.1.1</li>
<li>libcurl4 &gt;= 7.58.0</li>
<li>libboost-system &gt;= 1.62.0</li>
<li>libboost-thread &gt;= 1.62.0</li>
<li>libargon2 &gt;= 0~20161029-1.1 (only if built with Argon2 support)</li>
</ul>
<p ><b>For building (additionally):</b></p>
<ul>
<li>libssl (OpenSSL) development files &gt;= 1.1.1</li>
<li>(lib)boost, (lib)boost-system, (lib)boost-thread development files &gt;= 1.62</li>
<li>libcurl4 development files &gt;= 7.58.0</li>
<li>libargon2 development files &gt;= 0~20161029-1.1 (only if building with Argon2 support)</li>
<li>git</li>
<li>cmake &gt;= 3.13</li>
<li>gcc-c++/g++ or clang compiler with C++17 support</li>
</ul>
<p >For building the docs, doxygen must be installed. However, you can also <a href="https://jatofg.github.io/nawa/v0.9/docs/">access the docs online</a>.</p>
<h2>Clone, build, and install NAWA</h2>
<p >To build nawarun, pull the source code, open a terminal, and switch to the NAWA directory. If you haven't pulled the source code yet, do it:</p>
<p ><code>git clone <a href="https://github.com/jatofg/nawa.git">https://github.com/jatofg/nawa.git</a> nawa</code></p>
<p ><code>cd nawa</code></p>
<p >First, create a directory for the build files:</p>
<p ><code>mkdir build</code></p>
<p ><code>cd build</code></p>
<p >Create the build configuration:</p>
<p ><code>cmake -DCMAKE_BUILD_TYPE=RELEASE ..</code></p>
<p ><b>Note: You can pass some arguments to cmake to influence the build configuration:</b></p><ul>
<li>Build the tests as well: <code>-DBuildTests=ON</code></li>
<li>Build NAWA as shared library: <code>-DBuildSharedLib=ON</code></li>
<li>Build the <em>nawa_static</em> static library: <code>-DBuildStaticLib=ON</code></li>
<li>Do not build nawarun: <code>-DBuildNawarun=OFF</code></li>
<li>Disable building the examples: <code>-DBuildExamples=OFF</code></li>
<li>Disable building docs: <code>-DBuildDocs=OFF</code> (disabled automatically if doxygen is not installed)</li>
<li>Disable Argon2 support: <code>-DEnableArgon2=OFF</code></li>
</ul>
<p >Build NAWA (nawarun and the shared library, tests, examples, and docs, depending on your cmake arguments):</p>
<p ><code>make</code></p>
<p >And last, install it to the target directories so that the apps can find it (this will also install the headers needed for app development):</p>
<p ><code>sudo make install</code></p>
<h2>Uninstalling</h2>
<p >In the build directory, run:</p>
<p ><code>sudo xargs rm &lt; install_manifest.txt</code></p>
<p >Uninstalling before installing a new version is recommended to avoid ancient relics remaining on your system.</p>
<h1>Binary packages</h1>
<p >Binary packages are not available yet, just build it yourself :)</p>
<h1>Third-party licenses</h1>
<p >This project includes the following libraries (in the libs directory) with different (less strict) licenses:</p><ul>
<li>base64: see <code>libs/base64/LICENSE</code> for details</li>
<li>inih: New BSD License, see <code>libs/inih/LICENSE.txt</code> for details</li>
<li>libbcrypt: CC0, see <code>libs/libbcrypt/COPYING</code> for details</li>
<li>punycode: MIT License, see <code>libs/punycode/LICENSE</code> for details</li>
</ul>
<p >It automatically downloads the following libraries during build configuration:</p><ul>
<li>fastcgilite (also LGPL-licensed)</li>
<li>cpp-netlib (Boost Software License) </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
